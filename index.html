// Extended rhyming dictionary with 15+ rhyme groups
const rhymeGroups = [
  {
    base: "tree",
    rhymes: ["bee", "sea", "free", "knee", "glee"],
    lines: [
      "A lion danced beside the tree",
      "Then leapt across the open {rhyme}"
    ]
  },
  {
    base: "star",
    rhymes: ["car", "far", "jar", "guitar", "bazaar"],
    lines: [
      "A fairy flew close to a star",
      "Then zipped away inside a {rhyme}"
    ]
  },
  {
    base: "night",
    rhymes: ["light", "kite", "flight", "bright", "sight"],
    lines: [
      "A dragon soared into the night",
      "Its wings aglow with golden {rhyme}"
    ]
  },
  {
    base: "moon",
    rhymes: ["spoon", "tune", "June", "balloon"],
    lines: [
      "The kitten howled beneath the moon",
      "Then danced along to a magic {rhyme}"
    ]
  },
  {
    base: "sky",
    rhymes: ["fly", "high", "sigh", "eye", "goodbye"],
    lines: [
      "A robot launched into the sky",
      "It waved hello and whispered {rhyme}"
    ]
  },
  {
    base: "snow",
    rhymes: ["glow", "flow", "go", "throw"],
    lines: [
      "A wizard painted scenes in snow",
      "Each brushstroke made the mountains {rhyme}"
    ]
  },
  {
    base: "rain",
    rhymes: ["train", "plain", "lane", "main"],
    lines: [
      "A unicorn danced in the rain",
      "And galloped through a candy {rhyme}"
    ]
  },
  {
    base: "play",
    rhymes: ["day", "way", "stay", "array"],
    lines: [
      "A penguin sang a tune of play",
      "And waddled in a joyful {rhyme}"
    ]
  },
  {
    base: "stream",
    rhymes: ["dream", "gleam", "beam", "team"],
    lines: [
      "A turtle glided down the stream",
      "Then vanished in a glowing {rhyme}"
    ]
  },
  {
    base: "light",
    rhymes: ["height", "bright", "night", "flight"],
    lines: [
      "A squirrel raced toward the light",
      "Its tail a blur of shining {rhyme}"
    ]
  },
  {
    base: "cake",
    rhymes: ["lake", "snake", "make", "break"],
    lines: [
      "A pirate searched for golden cake",
      "But found a castle near the {rhyme}"
    ]
  },
  {
    base: "ball",
    rhymes: ["hall", "call", "wall", "small"],
    lines: [
      "A puppy chased a bouncy ball",
      "It bounced into a rainbow {rhyme}"
    ]
  },
  {
    base: "fog",
    rhymes: ["log", "frog", "jog", "hog"],
    lines: [
      "A ghost emerged from swirling fog",
      "And danced around a talking {rhyme}"
    ]
  },
  {
    base: "door",
    rhymes: ["floor", "more", "roar", "core"],
    lines: [
      "An owl peeked behind the door",
      "And heard a tiny dragon {rhyme}"
    ]
  },
  {
    base: "sun",
    rhymes: ["fun", "run", "done", "won"],
    lines: [
      "A monkey played beneath the sun",
      "Its laughter echoed full of {rhyme}"
    ]
  }
];

// Generate a rhyming poem using one of the rhyme groups
function generateRhymingPoem(userLine) {
  const rhymeSet = rhymeGroups[Math.floor(Math.random() * rhymeGroups.length)];
  const rhymeWord = rhymeSet.rhymes[Math.floor(Math.random() * rhymeSet.rhymes.length)];

  // Replace {rhyme} in line 2
  const line1 = rhymeSet.lines[0];
  const line2 = rhymeSet.lines[1].replace("{rhyme}", rhymeWord);

  let poemLines = [line1, line2];

  if (userLine.trim()) {
    poemLines.push(userLine.trim());
  }

  // Add a closing line from additional lines
  poemLines.push(getRandomWord(additionalLines));

  return poemLines.join('\n');
}

