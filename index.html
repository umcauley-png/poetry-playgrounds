<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>St Catherine's Poetry Playground — Expanded Banks</title>
  <style>
    body {
      font-family: 'Avenir Next', 'Segoe UI', 'Helvetica Neue', sans-serif;
      background: url('https://raw.githubusercontent.com/umcauley-png/poetry-playgrounds/refs/heads/main/a%20playground%20that%20i%20can%20use%20as%20a%20background.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #172c66;
      text-align: center;
      padding: 40px 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }

    h1 {
      color: #f582ae;
      background-color: rgba(255, 255, 255, 0.8);
      display: inline-block;
      padding: 10px 20px;
      border-radius: 12px;
      margin-bottom: 0.2em;
    }

    p#subtitle {
      margin-top: 0;
      font-weight: 600;
      margin-bottom: 20px;
      color: #444;
    }

    .poem-box {
      margin-top: 40px;
      font-size: 2rem;
      background-color: rgba(214, 246, 214, 0.9);
      border: 4px dashed #8bd3dd;
      padding: 30px;
      border-radius: 15px;
      min-height: 140px;
      width: 360px;
      max-width: 90vw;
      position: relative;
      color: #172c66;
      box-shadow: 0 0 12px rgba(0,0,0,0.15);
      white-space: pre-line;
      user-select: text;
    }

    .bounce { animation: bounce 0.6s; }
    @keyframes bounce {
      0% { transform: scale(1); }
      30% { transform: scale(1.1); }
      50% { transform: scale(0.95); }
      70% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    button {
      background-color: #ffb703;
      border: none;
      padding: 15px 30px;
      font-size: 1.5rem;
      margin: 15px 10px 30px 10px;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.3s ease;
      font-family: inherit;
    }
    button:hover { background-color: #fb8500; }

    #copyButton { background-color: #4caf50; }
    #copyButton:hover { background-color: #3a8a38; }

    #sparklesContainer {
      position: absolute;
      pointer-events: none;
      width: 350px;
      height: 180px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border-radius: 15px;
      overflow: visible;
      z-index: 10;
    }
    .sparkle {
      position: absolute;
      border-radius: 50%;
      opacity: 0.8;
      animation: twinkle 2s infinite ease-in-out;
      filter: drop-shadow(0 0 2px currentColor);
    }
    @keyframes twinkle {
      0%, 100% { opacity: 0.8; }
      50% { opacity: 0.2; }
    }
  </style>
</head>
<body>
  <h1>St Catherine's Poetry Playground</h1>
  <p id="subtitle">Click the button to create your own poem!</p>

  <div class="poem-box" id="poemBox">
    Your poem will appear here...
    <div id="sparklesContainer"></div>
  </div>

  <div>
    <button onclick="generatePoem()">Make a Poem</button>
    <button id="copyButton" onclick="copyPoem()">Copy Poem</button>
  </div>

  <audio id="chimeSound" src="magic_chime.mp3" preload="auto"></audio>

  <script>
    const wordBanks = {
      who: [
        "a shimmering fox", "the golden eagle", "a quiet rabbit", "the wandering wolf",
        "a glowing jellyfish", "the restless river", "a playful dolphin", "the silver moon",
        "an ancient oak", "the laughing child", "a gentle deer", "the whispering wind",
        "a clever cat", "the proud lion", "a tiny turtle", "the curious owl",
        "a glowing star", "the brave bear", "a buzzing bee", "the dancing flame"
      ],
      action: [
        "dances softly", "sings brightly", "jumps high", "giggles loudly",
        "spins quickly", "whispers gently", "paints boldly", "stomps wildly",
        "dreams quietly", "twirls gracefully", "runs swiftly", "flies high",
        "hides shyly", "laughs loudly", "swims slowly", "glides gracefully",
        "soars boldly", "tiptoes silently", "bursts joyfully", "wanders freely"
      ],
      where: [
        "in the golden savanna", "on a rainbow bridge", "under the starlit sky",
        "on a drifting cloud", "through the misty jungle", "beside a waterfall",
        "with a magic brush", "in a sparkling puddle", "on a mountain peak",
        "over a candy castle", "inside a treasure chest", "by the wide ocean",
        "in a secret garden", "on a sandy shore", "beneath the moonlight",
        "through the snowy tundra", "within the coral reef", "under the ancient oak",
        "in the desert dunes", "across the rolling meadow"
      ]
    };

    const additionalLines = [
  "Where dreams take flight",
  "In a world of wonder",
  "With magic in the air",
  "As the night softly falls",
  "Beneath the sparkling sky",
  "Until the morning wakes",
  "Where silence hums with light",
  "As rivers sing their song",
  "While shadows gently fade",
  "Where laughter paints the air",
  "Until the stars grow tired",
  "Where the earth holds its breath",
  "As dawn begins to glow",
  "As the meadow drifts to sleep",
  "Where oceans guard their secrets",
  "Until the golden sun returns",
  "As mountains whisper low",
  "Where the horizon melts away",
  "Until tomorrow’s song begins",
  "As fireflies light the dark",
  "Where time forgets to move"
  "When whispers meet the wind",
  "Where colours start to bloom"
];


    function getRandom(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

    function maybeAlliterate(line) {
      if (Math.random() < 0.16) { // ~1 in 6 poems
        const words = line.split(" ");
        if (words.length > 2) {
          const first = words[1][0].toLowerCase();
          words[1] = words[1].replace(/^[a-z]/i, first + first);
        }
        return words.join(" ");
      }
      return line;
    }

    function generateRandomPoem() {
      let lines = [
        getRandom(wordBanks.who),
        getRandom(wordBanks.action),
        getRandom(wordBanks.where),
        getRandom(additionalLines)
      ];
      // Apply alliteration occasionally
      if (Math.random() < 0.16) {
        const idx = Math.floor(Math.random() * lines.length);
        lines[idx] = maybeAlliterate(lines[idx]);
      }
      // Ensure capitalization on first line
      lines[0] = lines[0].charAt(0).toUpperCase() + lines[0].slice(1);
      return lines.join("\n");
    }

    function generatePoem() {
      const poemText = generateRandomPoem();
      const poemBox = document.getElementById('poemBox');
      poemBox.textContent = poemText;
      poemBox.classList.remove('bounce');
      void poemBox.offsetWidth;
      poemBox.classList.add('bounce');
      const sound = document.getElementById("chimeSound");
      if (sound) { sound.currentTime = 0; sound.play(); }
    }

    function copyPoem() {
      const text = document.getElementById('poemBox').textContent;
      navigator.clipboard.writeText(text).then(() => alert('Poem copied!'));
    }

    function createSparkles() {
      const container = document.getElementById('sparklesContainer');
      container.innerHTML = '';
      const colors = ['#FFD700','#FF69B4','#00FFFF','#FF4500','#7CFC00','#FF00FF'];
      for (let i=0; i<20; i++) {
        const sparkle = document.createElement('div');
        sparkle.classList.add('sparkle');
        sparkle.style.width = sparkle.style.height = `${Math.random()*8+4}px`;
        sparkle.style.backgroundColor = getRandom(colors);
        const edge = Math.floor(Math.random()*4);
        let x, y;
        switch(edge) {
          case 0: x = Math.random()*container.clientWidth; y = Math.random()*10; break;
          case 1: x = container.clientWidth-Math.random()*10; y = Math.random()*container.clientHeight; break;
          case 2: x = Math.random()*container.clientWidth; y = container.clientHeight-Math.random()*10; break;
          case 3: x = Math.random()*10; y = Math.random()*container.clientHeight; break;
        }
        sparkle.style.left = `${x}px`;
        sparkle.style.top = `${y}px`;
        sparkle.style.animationDuration = (Math.random()*2+1)+'s';
        container.appendChild(sparkle);
      }
    }

    window.addEventListener('load', createSparkles);
    window.addEventListener('resize', createSparkles);
  </script>
</body>
</html>
